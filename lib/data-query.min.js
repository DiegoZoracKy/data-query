/**
 * Query / Filter a set of Object Literal (‘JSON’), that could be an Array or Object Literal.
 *
 * @author Diego ZoracKy, @diegozoracky, http://diegozoracky.com
 *
 * @param   {Array | Object Literal}    dataSrc - Dataset do be filtered / queried
 * @param   {String | Object Literal}   filter - Properties path to be checked
 * @param   {String | Object Literal | RegEx}   filterValue - Value to be checked against the properties path
 * @return  {Array | Object Literal}    Dataset Filtered
 */
var dataQuery=function(){"use strict";function r(r,t){var n=[];for(var o in r)n.push(r[o]),t&&(n[n.length-1]._rootKey=o);return n}function t(t,n,c){if(t&&n){if(t.constructor==Array)return t.filter(function(r){return n.constructor==Function?n(r):o(r,n,c)});if(t.constructor==Object){var u={};t=r(t,!0),t=t.filter(function(r){return n.constructor==Function?n(r):o(r,n,c)});for(var e in t)u[t[e]._rootKey]=t[e],delete u[t[e]._rootKey]._rootKey;return u}}}function n(r,t){return void 0===r||void 0===t?!1:t.constructor==Function?t(r):r.constructor==Array&&t.constructor==Array?t.some(function(t){return t.constructor==RegExp?r.some(function(r){return r.match(t)}):r.indexOf(t)>=0}):r.constructor==Array?r.some(function(r){return t.constructor==RegExp?r.match(t):t==r}):t.constructor==Array?t.some(function(t){return t.constructor==RegExp?r.match(t):r==t}):t.constructor==RegExp?r.match(t):r==t}function o(r,t,u){if(t.constructor==String)return"undefined"!=typeof u?n(c(r,t),u):"undefined"!=typeof c(r,t);if(t.constructor==Object)for(var e in t)return e.match(/\./)?n(c(r,e),t[e]):r[e]&&r[e].constructor==Object&&t[e].constructor==Object?o(r[e],t[e]):n(r[e],t[e])}function c(r,t){return t.split(".").forEach(function(t){if(r){var n=t.match(/^\/(.*)\/$/);n&&(t=new RegExp(n[1],"gi")),t.constructor==RegExp?Object.keys(r).forEach(function(n){n.match(t)&&(r=r[n])}):r=r[t]}}),r}return function(r,n,o){return t(r,n,o)}}();"undefined"!=typeof module&&(module.exports=dataQuery);