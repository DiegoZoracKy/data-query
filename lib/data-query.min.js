/**
 * Query / Filter a set of Object Literal (‘JSON’), that could be an Array or Object Literal.
 *
 * @author Diego ZoracKy, @diegozoracky, http://diegozoracky.com
 *
 * @param   {Array | Object Literal}    dataSrc - Dataset do be filtered / queried
 * @param   {String | Object Literal}   filter - Properties path to be checked
 * @param   {String | Object Literal | RegEx}   filterValue - Value to be checked against the properties path
 * @return  {Array | Object Literal}    Dataset Filtered
 */
var dataQuery=function(){function k(a,b){var e=[],c;for(c in a)e.push(a[c]),b&&(e[e.length-1]._rootKey=c);return e}function l(a,b,e){if(a&&b){if(a.constructor==Array)return a.filter(function(a){return b.constructor==Function?b(a):f(a,b,e)});if(a.constructor==Object){var c={};a=k(a,!0);a=a.filter(function(a){return b.constructor==Function?b(a):f(a,b,e)});for(var d in a)c[a[d]._rootKey]=a[d],delete c[a[d]._rootKey]._rootKey;return c}}}function g(a,b){if(void 0===a||void 0===b)return!1;if(b.constructor==Function)return b(a);if(a.constructor==Array&&b.constructor==Array){if(a.length!=b.length)return!1;a.sort();b.sort();return a.every(function(a,c){return a===b[c]})}return a.constructor==Array?a.some(function(a){return b.constructor==RegExp?!!a.toString().match(b):b==a}):b.constructor==Array?b.some(function(b){return b.constructor==RegExp?!!a.toString().match(b):a==b}):b.constructor==RegExp?!!a.toString().match(b):a==b}function f(a,b,e){var c=!0;if(b.constructor==String)return"undefined"!=typeof e?g(h(a,b),e):"undefined"!=typeof h(a,b);if(b.constructor==Object)for(var d in b)c=d.match(/\./)?c&g(h(a,d),b[d]):a[d]&&a[d].constructor==Object&&b[d].constructor==Object?c&f(a[d],b[d]):c&g(a[d],b[d]);return c}function h(a,b){b.split(".").forEach(function(b){if(a){var c=b.match(/^\/(.*)\/$/);c&&(b=new RegExp(c[1],"gi"));b.constructor==RegExp?Object.keys(a).forEach(function(c){c.match(b)&&(a=a[c])}):a=a[b]}});return a}return function(a,b,e){return l(a,b,e)}}();"undefined"!==typeof module&&(module.exports=dataQuery);