/**
 * Query / Filter a set of Object Literal (‘JSON’), that could be an Array or Object Literal.
 *
 * @author Diego ZoracKy, @diegozoracky, http://diegozoracky.com
 *
 * @param   {Array | Object Literal}    dataSrc - Dataset do be filtered / queried
 * @param   {String | Object Literal}   filter - Properties path to be checked
 * @param   {String | Object Literal | RegEx}   filterValue - Value to be checked against the properties path
 * @return  {Array | Object Literal}    Dataset Filtered
 */
var dataQuery=function(){function k(a,b){var e=[],d;for(d in a)e.push(a[d]),b&&(e[e.length-1]._rootKey=d);return e}function l(a,b,e){if(a&&b){if(a.constructor==Array)return a.filter(function(a){return b.constructor==Function?b(a):f(a,b,e)});if(a.constructor==Object){var d={};a=k(a,!0);a=a.filter(function(a){return b.constructor==Function?b(a):f(a,b,e)});for(var c in a)d[a[c]._rootKey]=a[c],delete d[a[c]._rootKey]._rootKey;return d}}}function g(a,b){return void 0===a||void 0===b?!1:b.constructor==Function?b(a):a.constructor==Array&&b.constructor==Array?b.some(function(b){return b.constructor==RegExp?a.some(function(a){return a.match(b)}):0<=a.indexOf(b)}):a.constructor==Array?a.some(function(a){return b.constructor==RegExp?!!a.match(b):b==a}):b.constructor==Array?b.some(function(b){return b.constructor==RegExp?!!a.match(b):a==b}):b.constructor==RegExp?!!a.match(b):a==b}function f(a,b,e){var d=!0;if(b.constructor==String)return"undefined"!=typeof e?g(h(a,b),e):"undefined"!=typeof h(a,b);if(b.constructor==Object)for(var c in b)d=c.match(/\./)?d&g(h(a,c),b[c]):a[c]&&a[c].constructor==Object&&b[c].constructor==Object?d&f(a[c],b[c]):d&g(a[c],b[c]);return d}function h(a,b){b.split(".").forEach(function(b){if(a){var d=b.match(/^\/(.*)\/$/);d&&(b=new RegExp(d[1],"gi"));b.constructor==RegExp?Object.keys(a).forEach(function(c){c.match(b)&&(a=a[c])}):a=a[b]}});return a}return function(a,b,e){return l(a,b,e)}}();"undefined"!==typeof module&&(module.exports=dataQuery);