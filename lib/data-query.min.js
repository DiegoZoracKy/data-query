/**
 * Query / Filter a set of Object Literal (‘JSON’), that could be an Array or Object Literal.
 *
 * @author Diego ZoracKy, @diegozoracky, http://diegozoracky.com
 *
 * @param   {Array | Object Literal}    dataSrc - Dataset do be filtered / queried
 * @param   {String | Object Literal}   filter - Properties path to be checked
 * @param   {String | Object Literal | RegEx}   filterValue - Value to be checked against the properties path
 * @return  {Array | Object Literal}    Dataset Filtered
 */
var dataQuery=function(){"use strict";return function(r,t,n){function o(r,t){var n=[];for(var o in r)n.push(r[o]),t&&(n[n.length-1]._rootKey=o);return n}function c(r,t,n){if(r&&t){if(r.constructor==Array)return r.filter(function(r){return u(r,t,n)});if(r.constructor==Object){var c={};r=o(r,!0),r=r.filter(function(r){return u(r,t,n)});for(var e in r)c[r[e]._rootKey]=r[e],delete c[r[e]._rootKey]._rootKey;return c}}}function e(r,t){return void 0===r||void 0===t?!1:r.constructor==Array&&t.constructor==Array?t.some(function(t){return t.constructor==RegExp?r.some(function(r){return r.match(t)}):r.indexOf(t)>=0}):r.constructor==Array?r.some(function(r){return t.constructor==RegExp?r.match(t):t==r}):t.constructor==Array?t.some(function(t){return t.constructor==RegExp?r.match(t):r==t}):t.constructor==RegExp?r.match(t):r==t}function u(r,t,n){if(t.constructor==String)return"undefined"!=typeof n?e(i(r,t),n):"undefined"!=typeof i(r,t);if(t.constructor==Object)for(var o in t)return o.match(/\./)?e(i(r,o),t[o]):r[o]&&r[o].constructor==Object&&t[o].constructor==Object?u(r[o],t[o]):e(r[o],t[o])}function i(r,t){return t.split(".").forEach(function(t){if(r){var n=t.match(/^\/(.*)\/$/);n&&(t=new RegExp(n[1],"gi")),t.constructor==RegExp?Object.keys(r).forEach(function(n){n.match(t)&&(r=r[n])}):r=r[t]}}),r}return c(r,t,n)}}();"undefined"!=typeof module&&(module.exports=dataQuery);