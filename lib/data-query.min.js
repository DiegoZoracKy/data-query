/**
 * Query / Filter a set of Object Literal (‘JSON’), that could be an Array or Object Literal.
 *
 * @author Diego ZoracKy, @diegozoracky, http://diegozoracky.com
 *
 * @param   {Array | Object Literal}    dataSrc - Dataset do be filtered / queried
 * @param   {String | Object Literal | Function}   filter - Properties path to be checked
 * @param   {String | Object Literal | RegEx}   filterValue - Value to be checked against the properties path
 * @return  {Array | Object Literal}    Dataset Filtered
 */
var dataQuery=function(){"use strict";function t(t,r){var n=[];for(var o in t)n.push(t[o]),r&&(n[n.length-1]._rootKey=o);return n}function r(r,n,c){if(r&&n){if(r.constructor==Array)return r.filter(function(t){return n.constructor==Function?n(t):o(t,n,c)});if(r.constructor==Object){var e={};r=t(r,!0),r=r.filter(function(t){return n.constructor==Function?n(t):o(t,n,c)});for(var u in r)e[r[u]._rootKey]=r[u],delete e[r[u]._rootKey]._rootKey;return e}}}function n(t,r){if(void 0===t||void 0===r)return!1;if(t.constructor===Date&&r.constructor===Date)return t.getTime()===r.getTime();if(r.constructor==Function)return r(t);if(t.constructor==Array&&r.constructor==Array){if(t.length!=r.length)return!1;{t.slice().sort(),r.slice().sort()}return t.every(function(t,n){return r[n].constructor==RegExp?!!t.toString().match(r[n]):r[n]==t})}return t.constructor==Array?t.some(function(t){return r.constructor==RegExp?!!t.toString().match(r):r==t}):r.constructor==Array?r.some(function(r){return r.constructor==RegExp?!!t.toString().match(r):t==r}):r.constructor==Object&&t.constructor==Object?o(t,r):r.constructor==RegExp?!!t.toString().match(r):t==r}function o(t,r,e){var u=!0;if(r.constructor==String)return"undefined"!=typeof e?n(c(t,r),e):"undefined"!=typeof c(t,r);if(r.constructor==Object)for(var i in r)u&=i.match(/\./)?n(c(t,i),r[i]):t[i]&&t[i].constructor==Object&&r[i].constructor==Object?o(t[i],r[i]):n(t[i],r[i]);return u}function c(t,r){return r.split(".").forEach(function(r){if(t){var n=r.match(/^\/(.*)\/$/);n&&(r=new RegExp(n[1],"gi")),r.constructor==RegExp?Object.keys(t).forEach(function(n){n.match(r)&&(t=t[n])}):t=t[r]}}),t}return function(t,n,o){return r(t,n,o)}}();"undefined"!=typeof module&&(module.exports=dataQuery);